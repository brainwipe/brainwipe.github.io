{"componentChunkName":"component---src-templates-blog-post-js","path":"/2017-05-16-pulling-jekyll-teeth/","result":{"data":{"site":{"siteMetadata":{"title":"The Plastic Neuron"}},"markdownRemark":{"id":"3b68680d-708e-5d47-a1fc-eba712a5abd6","excerpt":"As I use more open source frameworks and tools, I’ve found that I’ve been writing down documentation that isn’t just useful to business. So I decided to start a…","html":"<p>As I use more open source frameworks and tools, I’ve found that I’ve been writing down documentation that isn’t just useful to business. So I decided to start a new dev blog. I checked out Wordpress and I’ve used Blogger before but I decided that static pages were the way to go, using the excellent <a href=\"https://pages.github.com/\">GitHub pages</a>.</p>\n<p>GitHub will host your pages for you, all you have to do is go through the steps on the <a href=\"https://pages.github.com/\">GitHub pages</a> site, clone the repo locally, add your web pages, push them back up and off you go. In the simplest form, that’s very neat but it suffers from the problem that the blog posts are all mixed up with the markup. If you want to change the look and feel of your site, you’re stuck.</p>\n<h2>Enter Jekyll</h2>\n<p>Jekyll is a Ruby that transforms your markdown blog text into lovely static HTML pages. You create your blog post, run it through Jekyll, check it looks OK and then push the result to GitHub. It’s a great idea, I wanted to use it.</p>\n<p>I’m new to Linux so I thought I’d use this as a way of learning more about the\r\n<a href=\"https://msdn.microsoft.com/en-us/commandline/wsl/install_guide\">Windows Subsystem for Linux</a> (WSL). Jekyll isn’t officially supported on Windows, so I thought it was a good omen to fire up the WSL.</p>\n<p>The Jekyll website was so sure of itself:</p>\n<blockquote>\n<p>Get up and running in <em>seconds</em>.</p>\n</blockquote>\n<p>Nonsense. Getting Jekyll to work was a hateful experience. Before you jump on your hate keyboard to point out that a lot of the problem I had were Ubuntu based, I didn’t know that when I started and Jekyll failed to tell me.</p>\n<h2>Pre-requisites</h2>\n<ul>\n<li>I already have WSL installed on my machine [instructions][windows-wsl]. It uses Ubuntu 14.04.4.</li>\n<li>I have already gone through the <a href=\"https://pages.github.com/\">Github Pages</a> and cloned locally.</li>\n</ul>\n<h2>Installing Jekyll</h2>\n<p>Naively, I put in the first command:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ gem <span class=\"token function\">install</span> jekyll bundler\r\nERROR:  While executing gem <span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">(</span>Gem::FilePermissionError<span class=\"token punctuation\">)</span>\r\n    You don't have <span class=\"token function\">write</span> permissions into the /var/lib/gems/1.9.1 directory.</code></pre></div>\n<p>Firstly, I notice that it’s trying to install to the gems directory of 1.9.1. Is that the Ruby version or the gems version?I went hunting and found that I didn’t have the <a href=\"https://jekyllrb.com/docs/installation/#requirements\">requirements</a>:</p>\n<ul>\n<li>Ruby 2.0+</li>\n<li>RubyGems</li>\n<li>Make</li>\n<li>GCC</li>\n</ul>\n<p>Ah, so my Linux distro isn’t complete enough. I start off by installing <a href=\"https://gcc.gnu.org/\">GCC</a> and Make.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> gcc\r\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token function\">make</span></code></pre></div>\n<p>It seems odd that Jekyll needs a compiler and make tool to work. Jekyll assured me that this is easy, so I kept going. So, I noticed that I needed Ruby 2.0, so what version do I have?</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ruby <span class=\"token parameter variable\">-v</span></code></pre></div>\n<p>Which gives:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ruby <span class=\"token number\">1.9</span>.3p484 <span class=\"token punctuation\">(</span><span class=\"token number\">2013</span>-11-22 revision <span class=\"token number\">43786</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span>x86_64-linux<span class=\"token punctuation\">]</span></code></pre></div>\n<p>OK, so that’s out of date. I’ll update:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> ruby\r\nReading package lists<span class=\"token punctuation\">..</span>. Done\r\nBuilding dependency tree\r\nReading state information<span class=\"token punctuation\">..</span>. Done\r\nruby is already the newest version.\r\nThe following packages were automatically installed and are no longer required:\r\n  fgetty os-prober\r\nUse <span class=\"token string\">'apt-get autoremove'</span> to remove them.\r\n<span class=\"token number\">0</span> to upgrade, <span class=\"token number\">0</span> to newly install, <span class=\"token number\">0</span> to remove and <span class=\"token number\">144</span> not to upgrade.</code></pre></div>\n<p>Already the newest version, eh? I think not! It’s over to the <a href=\"https://www.ruby-lang.org/en/documentation/installation/#apt\">Ruby Install</a> page. However Ubuntu’s <code class=\"language-text\">apt-get</code> will only get you as far as version 1.9.3. So how do you get Ruby 2 on Ubuntu 14.04. That sounds like a Stack Overflow question, <a href=\"http://stackoverflow.com/q/26595620/328730\">which it is</a>.</p>\n<h2>Enter rbenv</h2>\n<p>Silly me for thinking that <code class=\"language-text\">apt-get</code> would install Ruby 2. No, I have to use <a href=\"https://github.com/rbenv/rbenv\">rbenv</a>. You have to install a load of pre-requisites (some I already had) and then <code class=\"language-text\">git clone</code> the <code class=\"language-text\">rbenv</code> repository into a folder, add PATH variables and so on.</p>\n<p><a href=\"http://stackoverflow.com/a/26595869/328730\">From Stack Overflow answer:</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\r\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> git-core <span class=\"token function\">curl</span> zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev libcurl4-openssl-dev python-software-properties libffi-dev\r\n\r\n<span class=\"token function\">git</span> clone https://github.com/rbenv/rbenv.git ~/.rbenv\r\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'export PATH=\"$HOME/.rbenv/bin:$PATH\"'</span> <span class=\"token operator\">>></span> ~/.bashrc\r\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'eval \"$(rbenv init -)\"'</span> <span class=\"token operator\">>></span> ~/.bashrc\r\n<span class=\"token builtin class-name\">exec</span> <span class=\"token environment constant\">$SHELL</span>\r\n\r\n<span class=\"token function\">git</span> clone https://github.com/rbenv/ruby-build.git ~/.rbenv/plugins/ruby-build\r\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'export PATH=\"$HOME/.rbenv/plugins/ruby-build/bin:$PATH\"'</span> <span class=\"token operator\">>></span> ~/.bashrc\r\n<span class=\"token builtin class-name\">exec</span> <span class=\"token environment constant\">$SHELL</span>\r\n\r\nrbenv <span class=\"token function\">install</span> <span class=\"token parameter variable\">--verbose</span> <span class=\"token number\">2.4</span>.1\r\nrbenv global <span class=\"token number\">2.4</span>.1\r\nruby <span class=\"token parameter variable\">-v</span></code></pre></div>\n<p><code class=\"language-text\">rbenv install</code> took several minutes. I added the <code class=\"language-text\">--verbose</code> switch so that I could see it going (others <a href=\"http://stackoverflow.com/q/23944406/328730\">had thought it had hung</a>). The last command <code class=\"language-text\">ruby -v</code> gives me <code class=\"language-text\">ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-linux]</code>, which is a relief!</p>\n<p>It’s important to remember that I’m just trying to get Jekyll to run at this point. This is a pre-requisite to a pre-requisite. I was tempted to go back to writing HTML at this point. I’m pretty productive in that, I wrote my first HTML page at the end of 1995. I’m not quite spitting teeth at this point but I’d decided that I was going to blog all this nonsense. Not the first post I wanted to write but that’s blogging for you.</p>\n<h2>Let’s try Jekyll again</h2>\n<p>We have the pre-requisites installed, now to try installing Jekyll and <a href=\"http://bundler.io/\">bundler</a>. Bundler is a way to manage your Ruby gems, a Ruby gem being a library. It works off a Gemfile that greatly simplifies the inclusion and management of Ruby gems.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ gem <span class=\"token function\">install</span> jekyll bundler\r\n$ jekyll new my-awesome-site</code></pre></div>\n<p>This worked! I now had Jekyll ready to go. To build and run the site, go to the directory where your Jekyll site is and type:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ jekyll serve</code></pre></div>\n<h2>Theming</h2>\n<p>Jekyll doesn’t theme like other platforms. Rather than download a theme into a theme folder, you replace most of the files with theme files. I grabbed the popular <a href=\"https://github.com/poole/hyde\">Hyde</a> and replaced many of the files. You have to be careful with the <code class=\"language-text\">_config.yml</code> and <code class=\"language-text\">Gemfile</code> as these will have settings specific to the theme. I ended up with mash of Gemfile from Hyde and _config from the original new Jekyll site. It was a right mess. Rather than doing Jekyll new, I recommend cloning an existing theme into your GitHub pages folder.</p>\n<p>Once you have the theme down, make sure you use bundler to get the gems that the theme needs.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bundler</code></pre></div>\n<p>When that completes, run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ jekyll serve</code></pre></div>\n<p>It will tell you the port it’s chosen. On WSL, you need to remember that it shares ports with Windows, so you might get a port conflict if you have other sites running elsewhere.</p>","frontmatter":{"title":"Pulling Jekyll teeth on the Windows Subsystem for Linux","date":"May 16, 2017","description":null}},"previous":null,"next":{"fields":{"slug":"/2017-05-17-linux-wsl/"},"frontmatter":{"title":"A .NET codger getting into Linux on Windows"}}},"pageContext":{"id":"3b68680d-708e-5d47-a1fc-eba712a5abd6","previousPostId":null,"nextPostId":"3ba1181a-63ba-5fdf-b7c7-9b48a05ac681"}},"staticQueryHashes":["2841359383","69202846"]}